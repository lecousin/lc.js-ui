lc.app.onDefined(["lc.ui.DropDown.Extension"],function(){lc.core.extendClass("lc.ui.DropDown.Multiple",[lc.ui.Menu.Extension,lc.Configurable],function(){lc.Configurable.call(this,{separator:{types:["string","Node"],value:", ",set:function(e,t){t.separator.value=e,this.dropdown.$setContentFromSelection()}}})},{extensionName:"multiple",init:function(e){(this.dropdown=e).menu.singleSelection=!1,this._previousSetContentFromSelection=e.$setContentFromSelection,e.$setContentFromSelection=function(){var e=this.menu.getSelection();if(lc.html.empty(this.container),0==e.length)this.container.appendChild(this.$emptySelection);else{var t=this.getExtension(lc.ui.DropDown.Multiple).separator,n=document.createElement("DIV");n.className="lc-dropdown-multiple-content";for(var i=0;i<e.length;++i){var s=e[i],o=this.menu.getItemOriginalElement(s);if(o=o.hasAttribute("text")?document.createTextNode(o.getAttribute("text")):o.cloneNode(!0),0<i)if("string"==typeof t){var l=document.createElement("SPAN");l.appendChild(document.createTextNode(t)),l.className="lc-dropdown-multiple-separator",n.appendChild(l)}else n.appendChild(t.cloneNode(!0));n.appendChild(o)}this.container.appendChild(n)}},Object.defineProperty(e,"values",{get:function(){for(var e=this.menu.getSelection(),t=[],n=0;n<e.length;++n)t.push(this.getItemValue(e[n]));return t},set:function(e){for(var t=this.menu.getItems(),n=[],i=0;i<t.length;++i)0<=e.indexOf(this.getItemValue(t[i]))&&n.push(t[i]);this.menu.selectItems(n)}})},destroy:function(e){this.dropdown=null,e.menu.singleSelection=!0,e.$setContentFromSelection=this._previousSetContentFromSelection,delete e.values}}),lc.Extension.Registry.register(lc.ui.DropDown,lc.ui.DropDown.Multiple)}),lc.app.onDefined(["lc.ui.Component","lc.ui.Choice"],function(){lc.core.extendClass("lc.ui.DropDown",[lc.ui.Component],function(e,t,n){this.menu=new lc.ui.Menu(document.createElement("DIV"),!0,!0),this.popin=new lc.ui.Popin(document.createElement("DIV")),lc.css.addClass(this.popin.container,"lc-pop-in-contextual"),this.popin.container.appendChild(this.menu.container),this.popin.addExtension(lc.ui.Popin.AutoHide);for(var i=0;i<e.attributes.length;++i){var s=e.attributes.item(i);s.nodeName.toLowerCase().startsWith("lc-menu-")?this.menu.container.setAttribute(s.nodeName,s.nodeValue):s.nodeName.toLowerCase().startsWith("lc-pop-in-")&&this.popin.container.setAttribute(s.nodeName,s.nodeValue)}var o=lc.css.getClasses(e);for(i=0;i<o.length;++i){var l=o[i];l.toLowerCase().startsWith("lc-menu-")?lc.css.addClass(this.menu.container,l):l.toLowerCase().startsWith("lc-pop-in-")&&lc.css.addClass(this.popin.container,l)}Object.defineProperty(this,"value",{get:function(){var e=this.menu.getSelection();if(0!=e.length)return this.getItemValue(e[0])},set:function(e){for(var t=this.menu.getItems(),n=null,i=0;i<t.length;++i)if(this.getItemValue(t[i])==e){n=t[i];break}n?this.menu.select(n):lc.log.warn("lc.ui.DropDown","Set value to "+e+" but no item has this value. Ignored.")}}),lc.ui.Component.call(this,e,t,n)},{componentName:"lc-dropdown",value:null,$emptySelection:null,configure:function(){this.registerEvents(["selectionChanged"]),this.popin.getExtension(lc.ui.Popin.AutoHide).ignoreClickOnElements.push(this.container),this._width=20,this._height=15,this.$emptySelection=document.createElement("DIV"),this.menu.performConfiguration(),this.popin.performConfiguration(),this.popin.attachTo(this.container),this.popin.attachVertical="bottom-start",this.popin.attachHorizontal="left-start",this.popin.forceOrientation=!1,lc.events.listen(this.container,"click",new lc.async.Callback(this,function(){this.popin.toggleShow()})),this.menu.on("selectionChanged",new lc.async.Callback(this,this._menuItemSelected)),this.menu.on("itemAdded",new lc.async.Callback(this,this._menuItemAdded)),this.menu.on("itemRemoved",new lc.async.Callback(this,this._computeSize)),this.popin.on("show",new lc.async.Callback(this,function(){lc.css.addClass(this.container,"dropdown-open")})),this.popin.on("hide",new lc.async.Callback(this,function(){lc.css.removeClass(this.container,"dropdown-open")}))},build:function(){for(;0<this.container.childNodes.length;)this.menu.container.appendChild(this.container.childNodes[0]);this.menu.performBuild(),this.popin.performBuild(),this._computeSize(),this._menuItemSelected()},getItemValue:function(e){if(void 0!==e.value)return e.value;var t=this.menu.getItemOriginalElement(e);return t.hasAttribute("value")?t.getAttribute("value"):void 0},_menuItemSelected:function(){this.$setContentFromSelection(),0<this.container.childNodes.length&&(this.container.childNodes[0].style.minWidth=this._width+"px",this.container.childNodes[0].style.minHeight=this._height+"px"),this.trigger("selectionChanged")},$setContentFromSelection:function(){var e=this.menu.getSelection(),t=0<e.length?e[0]:null;if(lc.html.empty(this.container),t){var n=this.menu.getItemOriginalElement(t).cloneNode(!0);this.container.appendChild(n),this.popin.hide()}else this.container.appendChild(this.$emptySelection)},_menuItemAdded:function(e,t){this._computeItemSize(t),t.element.__select_menu_item_width>this._width&&(this._width=t.element.__select_menu_item_width),t.element.__select_menu_item_height>this._height&&(this._height=t.element.__select_menu_item_height),0<this.container.childNodes.length&&this.isBuilt()&&(this.container.childNodes[0].style.minWidth=this._width+"px",this.container.childNodes[0].style.minHeight=this._height+"px")},_computeItemSize:function(e){var t=this.menu.getItemOriginalElement(e).cloneNode(!0);t.style.position="fixed",t.style.top="-10000px",t.style.left="-10000px",document.body.appendChild(t),e.element.__select_menu_item_width=t.offsetWidth,e.element.__select_menu_item_height=t.offsetHeight,document.body.removeChild(t)},_computeSize:function(){for(var e=20,t=15,n=this.menu.getItems(),i=0;i<n.length;++i)void 0===n[i].element.__select_menu_item_width&&this._computeItemSize(n[i]),n[i].element.__select_menu_item_width>e&&(e=n[i].element.__select_menu_item_width),n[i].element.__select_menu_item_height>t&&(t=n[i].element.__select_menu_item_height);this._width=e,this._height=t,0<this.container.childNodes.length&&this.isBuilt()&&(this.container.childNodes[0].style.minWidth=this._width+"px",this.container.childNodes[0].style.minHeight=this._height+"px")},destroy:function(){lc.ui.Component.prototype.destroy.call(this),lc.ui.Choice.prototype.destroy.call(this),this.$emptySelection=null,this.menu.destroy(),this.menu=null,this.popin.destroy(),this.popin=null}}),lc.ui.Component.Registry.register(lc.ui.DropDown),lc.core.extendClass("lc.ui.DropDown.Extension",lc.ui.Component.Extension,function(){},{})}),lc.app.onDefined(["lc.ui.Menu.Extension"],function(){lc.core.extendClass("lc.ui.Menu.Checkbox",[lc.ui.Menu.Extension],function(){},{extensionName:"checkbox",priority:-5e3,init:function(e){for(var t=e.getItems(),n=0;n<t.length;++n)this.beforeItemAdded(e,t[n])},beforeItemAdded:function(e,t){if(lc.core.instanceOf(t,lc.ui.Choice.Item.Selectable)){var n=document.createElement("INPUT");(t._menu_checkbox=n).type="checkbox",n.checked=t.selected,n.disabled=t.disabled,t.element.insertBefore(n,t.element.childNodes[0]),n.onchange=function(){t.selected=this.checked},t.on("selectedChanged",function(){n.checked=t.selected}),t.on("disabledChanged",function(){n.disabled=t.disabled})}else{n=document.createElement("INPUT");(t._menu_checkbox=n).type="checkbox",n.style.opacity="0",t.element.insertBefore(n,t.element.childNodes[0])}},destroy:function(e){for(var t=e.getItems(),n=0;n<t.length;++n)t[n]._menu_checkbox&&(lc.html.remove(t[n]._menu_checkbox),t[n]._menu_checkbox=null)}}),lc.Extension.Registry.register(lc.ui.Menu,lc.ui.Menu.Checkbox)}),lc.app.onDefined(["lc.ui.Menu.Extension"],function(){lc.core.extendClass("lc.ui.Menu.SubMenu",[lc.ui.Menu.Extension],function(){},{extensionName:"sub-menu",priority:-5e3,init:function(e){for(var t=e.getItems(),n=0;n<t.length;++n)this.beforeItemAdded(e,t[n]);this._previousCreateItem=e.createItem,e.createItem=function(e){return e.hasAttribute("sub-menu")&&e.setAttribute("not-selectable","true"),this.getExtension(lc.ui.Menu.SubMenu)._previousCreateItem.call(this,e)}},_handleSubMenu:function(e,n){if(!n.subMenu){var t=e.getItemOriginalElement(n);if(t.hasAttribute("sub-menu")){for(var i=0;i<t.childNodes.length;++i)if(1==t.childNodes[i].nodeType){var s=lc.Context.get(t.childNodes[i],!0);if(s&&void 0!==s["lc.ui.Component"]){var o=s["lc.ui.Component"];if(lc.core.instanceOf(o,lc.ui.Menu)){n.subMenu=o,t.removeChild(t.childNodes[i]);break}}}n.subMenu&&(n.subMenu.parentMenu=e,lc.ui.Menu.SubMenu._itemSelected(e),lc.css.addClass(n.element,"clickable"),lc.css.addClass(n.element,"lc-menu-sub-menu"),lc.events.listen(n.element,"click",n._subMenuClick=new lc.async.Callback(n,function(){if(!this.subMenuPopin){var e=document.createElement("DIV");e.appendChild(this.subMenu.container),e.className="lc-pop-in-contextual",this.subMenuPopin=new lc.ui.Popin(e),this.subMenuPopin.attachTo(this.element);var t=getComputedStyle(this.subMenu.parentMenu.container);void 0!==t.flexDirection&&"row"==t.flexDirection?(this.subMenuPopin.attachVertical="bottom-start",this.subMenuPopin.attachHorizontal="left-start"):(this.subMenuPopin.attachVertical="top-start",this.subMenuPopin.attachHorizontal="right-start"),this.subMenuPopin.addExtension(lc.ui.Popin.AutoHide).ignoreClickOnElements.push(this.element),this.subMenu.on("selectionChanged",n._subMenuSelectionChanged=new lc.async.Callback(this,function(){0<this.subMenu.getSelection().length&&(this.subMenuPopin.hide(),lc.ui.Menu.SubMenu._itemSelected(this.subMenu))}))}this.subMenuPopin.toggleShow()})))}}},itemCreated:function(e,t){this._handleSubMenu(e,t)},beforeItemAdded:function(e,t){this._handleSubMenu(e,t);var n=document.createElement("DIV");n.className="lc-menu-sub-menu-arrow",t.element.appendChild(n)},destroy:function(e){e.createItem=this._previousCreateItem,this._previousCreateItem=null;for(var t=e.getItems(),n=0;n<t.length;++n){var i=t[n];if(i.subMenu){var s=e.getItemOriginalElement(i);s.setAttribute("sub-menu",""),s.appendChild(i.subMenu.container),i._subMenuSelectionChanged&&i.subMenu.unlisten("selectionChanged",i._subMenuSelectionChanged),i.subMenu.parentMenu=null,i.subMenu=null,i.subMenuPopin.destroy(),i.subMenuPopin=null,lc.css.removeClass(i.element,"lc-menu-sub-menu"),lc.css.removeClass(i.element,"clickable"),lc.events.unlisten(i.element,"click",i._subMenuClick),i._subMenuClick=null}for(var o=0;o<i.element.childNodes.length;++o)1==i.element.childNodes[o].nodeType&&lc.css.hasClass(i.element.childNodes[o],"lc-menu-sub-menu-arrow")&&(lc.html.remove(i.element.childNodes[o]),o--)}}}),lc.Extension.Registry.register(lc.ui.Menu,lc.ui.Menu.SubMenu),lc.ui.Menu.SubMenu._itemSelected=function(i){for(var e=i;e.parentMenu;)e=e.parentMenu;var s=function(e){e!==i&&e.unselectAll();for(var t=e.getItems(),n=0;n<t.length;++n)t[n].subMenu&&s(t[n].subMenu)};s(e)}}),lc.app.onDefined(["lc.ui.Component","lc.ui.Choice"],function(){lc.core.extendClass("lc.ui.Menu",[lc.ui.Component,lc.ui.Choice],function(e,t,n){lc.ui.Choice.call(this,e,!0),lc.ui.Component.call(this,e,t,n),this.styles=["menu-bar","tab-folder"]},{componentName:"lc-menu",configure:function(){this.on("itemAdded",function(e,t){e.$itemAdded(t)})},build:function(){this.buildFromContent(this.container)},buildItem:function(e){if(1==e.nodeType){var t=this.createItem(e);this.addItem(t)}},createItem:function(e){return e.hasAttribute("not-selectable")?new lc.ui.Choice.Item(this,e):new lc.ui.Choice.Item.Selectable(this,e)},$itemCreated:function(e){var t=document.createElement("DIV");t.appendChild(e.element),t._menu_item_element=e.element,lc.css.addClass(t,"lc-menu-item-wrapper"),lc.css.addClass(e.element,"lc-menu-item"),e.element=t,lc.core.instanceOf(e,lc.ui.Choice.Item.Selectable)&&(t._menu_item_element.hasAttribute("disabled")&&"false"!=t._menu_item_element.getAttribute("disabled")&&(e.disabled=!0),t._menu_item_element.hasAttribute("selected")&&"false"!=t._menu_item_element.getAttribute("selected")&&(e.selected=!0)),this.callExtensions("itemCreated",this,e)},$itemAdded:function(e){this.callExtensions("beforeItemAdded",this,e);var t=this.indexOf(e);t>=this.container.childNodes.length?this.container.appendChild(e.element):this.container.insertBefore(e.element,this.getItemAt(t).element),this.callExtensions("afterItemAdded",this,e)},getItemOriginalElement:function(e){return e.element._menu_item_element?e.element._menu_item_element:e.element},destroy:function(){lc.ui.Component.prototype.destroy.call(this),lc.ui.Choice.prototype.destroy.call(this)}}),lc.ui.Component.Registry.register(lc.ui.Menu),lc.core.extendClass("lc.ui.Menu.Extension",lc.ui.Component.Extension,function(){},{itemCreated:function(e,t){},beforeItemAdded:function(e,t){},afterItemAdded:function(e,t){}})}),lc.app.onDefined("lc.ui.Panel",function(){lc.core.extendClass("lc.ui.Panel.Closeable",lc.ui.Panel.Extension,function(){},{priority:-1e4,extensionName:"closeable",postConfigure:function(e){e.closeDiv=document.createElement("DIV"),e.closeDiv.className="lc-panel-close"},postBuild:function(e){lc.events.listen(e.closeDiv,"click",function(){lc.html.remove(e.container)}),e.rightDiv.appendChild(e.closeDiv)},destroy:function(e){e.closeDiv&&(lc.html.remove(e.closeDiv),e.closeDiv=null,lc.ui.Component.Extension.call(this,e))}}),lc.Extension.Registry.register(lc.ui.Panel,lc.ui.Panel.Closeable)}),lc.app.onDefined("lc.ui.Panel",function(){lc.core.extendClass("lc.ui.Panel.Collapsible",lc.ui.Panel.Extension,function(){},{priority:-1e3,extensionName:"collapsible",postConfigure:function(e){e.collapseDiv=document.createElement("DIV"),e.collapseDiv.className="lc-panel-collapse lc-panel-expanded",e.collapse=function(){lc.animation.collapseHeight(this.content,500).ondone(new lc.async.Callback(this,function(){this.content.style.height="0px",this.content.style.paddingTop="0px",this.content.style.paddingBottom="0px",this.content.style.overflow="hidden"})),lc.css.removeClass(this.collapseDiv,"lc-panel-expanded"),lc.css.addClass(this.collapseDiv,"lc-panel-collapsed")},e.expand=function(){this.content.style.height="",this.content.style.paddingTop="",this.content.style.paddingBottom="",this.content.style.overflow="",lc.animation.expandHeight(this.content,500),lc.css.addClass(this.collapseDiv,"lc-panel-expanded"),lc.css.removeClass(this.collapseDiv,"lc-panel-collapsed")},e.toggleCollapsed=function(){this.isExpanded()?this.collapse():this.expand()},e.isCollapsed=function(){return lc.css.hasClass(this.collapseDiv,"lc-panel-collapsed")},e.isExpanded=function(){return!this.isCollapsed()}},postBuild:function(e){lc.events.listen(e.collapseDiv,"click",new lc.async.Callback(e,e.toggleCollapsed)),e.rightDiv.appendChild(e.collapseDiv)},destroy:function(e){e.collapseDiv&&(lc.html.remove(e.collapseDiv),e.collapseDiv=null,lc.ui.Component.Extension.call(this,e))}}),lc.Extension.Registry.register(lc.ui.Panel,lc.ui.Panel.Collapsible)}),lc.app.onDefined("lc.ui.Component",function(){lc.core.extendClass("lc.ui.Panel",lc.ui.Component,function(e,t,n){lc.ui.Component.call(this,e,t,n)},{componentName:"lc-panel",configure:function(){this.header=document.createElement("DIV"),this.header.className="lc-panel-header",this.content=document.createElement("DIV"),this.content.className="lc-panel-content",this.titleDiv=document.createElement("DIV"),this.titleDiv.className="lc-panel-title",this.header.appendChild(this.titleDiv),this.leftDiv=document.createElement("DIV"),this.leftDiv.className="lc-panel-header-left",this.header.appendChild(this.leftDiv),this.rightDiv=document.createElement("DIV"),this.rightDiv.className="lc-panel-header-right",this.header.appendChild(this.rightDiv)},build:function(){for(;0<this.container.childNodes.length;){var e=this.container.removeChild(this.container.childNodes[0]);if(1==e.nodeType)if("TITLE"==e.nodeName)for(;0<e.childNodes.length;)this.titleDiv.appendChild(e.removeChild(e.childNodes[0]));else if("CONTENT"==e.nodeName)for(;0<e.childNodes.length;)this.content.appendChild(e.removeChild(e.childNodes[0]))}this.container.appendChild(this.header),this.container.appendChild(this.content)},destroy:function(){lc.events.destroyed(this.header),this.header=null,this.titleDiv=null,this.leftDiv=null,this.rightDiv=null,lc.events.destroyed(this.content),this.content=null,lc.ui.Component.prototype.destroy.call(this)}}),lc.ui.Component.Registry.register(lc.ui.Panel),lc.core.extendClass("lc.ui.Panel.Extension",lc.ui.Component.Extension,function(){},{})}),lc.app.onDefined(["lc.ui.Popin.Extension"],function(){lc.core.extendClass("lc.ui.Popin.AutoHide",[lc.ui.Popin.Extension],function(){this.ignoreClickOnElements=[]},{extensionName:"auto-hide",ignoreClickOnElements:null,init:function(e){this.popin=e,this.onautohide=new lc.async.Callback(this,function(e){for(var t=e.target;null!=t&&t!=document.body&&t.parentNode!=t;){if(t==this.popin.container||0<=this.ignoreClickOnElements.indexOf(t))return;t=t.parentNode}this.popin.hide()})},afterShow:function(){lc.events.listen(document.body,"click",this.onautohide,!0)},afterHide:function(){lc.events.unlisten(document.body,"click",this.onautohide,!0)},destroy:function(){lc.events.unlisten(document.body,"click",this.onautohide,!0),this.onautohide=null,this.ignoreClickOnElements=null,this.popin=null}}),lc.Extension.Registry.register(lc.ui.Popin,lc.ui.Popin.AutoHide)}),lc.app.onDefined(["lc.ui.Component"],function(){lc.core.extendClass("lc.ui.Popin",[lc.ui.Component,lc.Configurable],function(e,t,n){var i={attachVertical:{types:["enum"],value:"bottom-start",enumValues:["top-start","top-end","middle","bottom-start","bottom-end"],set:function(e,t){if(e){if("top-start"==e.toLowerCase())e="top-start";else if("top-end"==e.toLowerCase())e="top-end";else if("middle"==e.toLowerCase())e="middle";else if("bottom-start"==e.toLowerCase())e="bottom-start";else{if("bottom-end"!=e.toLowerCase())return void lc.log.warn("lc.ui.Popin","Unknown attachVertical value: "+e);e="bottom-end"}t.attachVertical.value!=e&&(t.attachVertical.value=e,this.isShown()&&this._computePosition())}}},attachHorizontal:{types:["enum"],value:"left-start",enumValues:["left-start","left-end","center","right-start","right-end"],set:function(e,t){if(e){if("left-start"==e.toLowerCase())e="left-start";else if("left-end"==e.toLowerCase())e="left-end";else if("center"==e.toLowerCase())e="center";else if("right-start"==e.toLowerCase())e="right-start";else{if("right-end"!=e.toLowerCase())return void lc.log.warn("lc.ui.Popin","Unknown attachHorizontal value: "+e);e="right-end"}t.attachHorizontal.value!=e&&(t.attachHorizontal.value=e,this.isShown()&&this._computePosition())}}},forceOrientation:{types:["boolean"],value:!1,set:function(e,t){"boolean"==typeof e&&t.forceOrientation.value!==e&&(t.forceOrientation.value=e,this.isShown()&&this._computePosition())}}};lc.Configurable.call(this,i),this._attachment=null,this._shown=!1,lc.ui.Component.call(this,e,t,n)},{componentName:"lc-pop-in",configure:function(){this.registerEvents(["show","hide"]),this._recomputePosition=new lc.async.Callback(this,this._computePosition)},build:function(){if(document.body.appendChild(this.container),this.container.hasAttribute("attach-to")){var e=document.getElementById(this.container.getAttribute("attach-to"));e?this.attachTo(e):lc.log.warn("lc.ui.Popin","pop-in attached to element id '"+this.container.getAttribute("attach-to")+"' but it does not exist.")}if(this.container.hasAttribute("attach-orientation")){var t=this.container.getAttribute("attach-orientation"),n=t.indexOf(",");if(n<0)this.attachVertical=t.trim();else{var i=t.substring(0,n).trim();0<i.length&&(this.attachVertical=i),0<(i=t.substring(n+1).trim()).length&&(this.attachHorizontal=i)}}},attachTo:function(e){this._attachment=e},show:function(){if(!this._shown){var e=lc.animation.animate(this.container);if(this.callExtensions("beforeShow"),this._shown=!0,this._computePosition(),this._attachment){lc.events.listen(window,"resize",this._recomputePosition),lc.events.listen(window,"scroll",this._recomputePosition);for(var t=this._attachment.parentNode;t&&t!=document.body;)lc.events.listen(t,"scroll",this._recomputePosition),t=t.parentNode}this.callExtensions("afterShow",e),this.trigger("show",e)}},showAttached:function(e,t,n){this.attachTo(e),this.setAttachmentOrientation(t,n),this.show()},hide:function(){if(this._shown){var e=lc.animation.animateReverse(this.container);if(this.callExtensions("beforeHide"),this._shown=!1,e.ondone(new lc.async.Callback(this,function(){this.container.style.display="none"})),this._attachment){lc.events.unlisten(window,"resize",this._recomputePosition),lc.events.unlisten(window,"scroll",this._recomputePosition);for(var t=this._attachment.parentNode;t&&t!=document.body;)lc.events.unlisten(t,"scroll",this._recomputePosition),t=t.parentNode}this.callExtensions("afterHide",e),this.trigger("hide",e)}},isShown:function(){return this._shown},isHidden:function(){return!this._shown},toggleShow:function(){this.isShown()?this.hide():this.show()},_computePosition:function(){var e;if(this.container.style.maxHeight="",this.container.style.overflowY="",this.container.style.maxWidth="",this.container.style.overflowX="",this.container.style.display="block",this.container.style.position="fixed",this.container.offsetHeight>.9*window.innerHeight&&(this.container.style.maxHeight=Math.floor(.9*window.innerHeight)+"px",this.container.style.overflowY="auto"),this.container.offsetWidth>.9*window.innerWidth&&(this.container.style.maxWidth=Math.floor(.9*window.innerWidth)+"px",this.container.style.overflowX="auto"),this._attachment){var t=this._attachment.getBoundingClientRect();switch(e={x:t.left,y:t.top},this.attachVertical){case"top-start":break;case"top-end":e.y-=this.container.offsetHeight;break;case"bottom-start":e.y+=this._attachment.offsetHeight;break;case"bottom-end":e.y+=this._attachment.offsetHeight-this.container.offsetHeight;break;case"middle":e.y+=this._attachment.offsetHeight/2-this.container.offsetHeight/2}switch(this.attachHorizontal){case"left-start":break;case"left-end":e.x-=this.container.offsetWidth;break;case"right-start":e.x+=this._attachment.offsetWidth;break;case"right-end":e.x+=this._attachment.offsetWidth-this.container.offsetWidth;break;case"center":e.x+=this._attachment.offsetWidth/2-this.container.offsetWidth/2}this.forceOrientation||(e.y+this.container.offsetHeight>window.innerHeight&&(75<=window.innerHeight-e.y?(this.container.style.maxHeight=window.innerHeight-e.y+"px",this.container.style.overflowY="auto"):e.y=t.top-this.container.offsetHeight),e.y<0&&(e.y=0),e.x+this.container.offsetWidth>window.innerWidth&&(75<=window.innerWidth-e.x?(this.container.style.maxWidth=window.innerWidth-e.x+"px",this.container.style.overflowX="auto"):e.x=t.left-this.container.offsetWidth),e.x<0&&(e.x=0)),lc.css.removeClass(this.container,"lc-animate-down"),lc.css.removeClass(this.container,"lc-animate-up"),lc.css.removeClass(this.container,"lc-animate-left"),lc.css.removeClass(this.container,"lc-animate-right"),e.y<=t.top?lc.css.addClass(this.container,"lc-animate-up"):lc.css.addClass(this.container,"lc-animate-down"),e.x<=t.left&&lc.css.addClass(this.container,"lc-animate-left"),e.x>=t.left+this._attachment.offsetWidth&&lc.css.addClass(this.container,"lc-animate-right")}else e={x:0,y:0};this.container.style.top=e.y+"px",this.container.style.left=e.x+"px",this.callExtensions("afterPosition",e)},destroy:function(){this._shown&&this.hide(),this._attachment=null,lc.ui.Component.prototype.destroy.call(this)}}),lc.ui.Component.Registry.register(lc.ui.Popin),lc.core.extendClass("lc.ui.Popin.Extension",lc.ui.Component.Extension,function(){},{beforeShow:function(){},afterShow:function(e){},beforeHide:function(){},afterHide:function(e){},afterPosition:function(e){}})}),lc.app.onDefined("lc.ui.Component",function(){lc.core.extendClass("lc.ui.ProgressBar",[lc.ui.Component,lc.Configurable],function(e,t,n){var i={total:{types:["integer"],value:1,set:function(e,t){e||(e=1),"string"==typeof e&&(e=parseInt(e)),e<=0&&(e=1),t.total.value=e,this.updateBar()}},position:{types:["integer"],value:0,set:function(e,t){e||(e=0),"string"==typeof e&&(e=parseInt(e)),t.position.value=e,this.updateBar()}},percentTextVisible:{types:["boolean"],value:!1,set:function(e,t){t.percentTextVisible.value=!!e,this.percentTextContainer.style.display=e?"":"none"}},text:{types:["string","Node"],value:"",set:function(e,t){e||(e=""),"string"==typeof(t.text.value=e)&&(e=document.createTextNode(e)),lc.html.empty(this.textContainer),this.textContainer.appendChild(e)}},subText:{types:["string","Node"],value:"",set:function(e,t){e||(e=""),"string"==typeof(t.subText.value=e)&&(e=document.createTextNode(e)),lc.html.empty(this.subTextContainer),this.subTextContainer.appendChild(e)}}};lc.Configurable.call(this,i),lc.ui.Component.call(this,e,t,n)},{componentName:"lc-progress-bar",configure:function(){this.textContainer=document.createElement("DIV"),this.textContainer.className="progressText",this.barContainer=document.createElement("DIV"),this.barContainer.className="progressBarContainer",this.bar=document.createElement("DIV"),this.bar.className="progressBar",this.barContainer.appendChild(this.bar),this.subTextContainer=document.createElement("DIV"),this.subTextContainer.className="progressSubText",this.percentTextContainer=document.createElement("DIV"),this.percentTextContainer.className="progressPercentTextContainer",this.barContainer.appendChild(this.percentTextContainer),this.percentText=document.createElement("DIV"),this.percentText.className="progressPercentText",this.percentTextContainer.appendChild(this.percentText),this.container.hasAttribute("percent-text")&&(this.percentTextVisible="true"==this.container.getAttribute("percent-text")),this.percentTextContainer.style.display=this.percentTextVisible?"":"none"},build:function(){var e;(e=this.container.getAttribute("text"))&&(this.text=e),(e=this.container.getAttribute("subText"))&&(this.subText=e),(e=this.container.getAttribute("total"))&&(this.total=e),(e=this.container.getAttribute("position"))&&(this.position=e),this.container.appendChild(this.textContainer),this.container.appendChild(this.barContainer),this.container.appendChild(this.subTextContainer),this.updateBar()},updateBar:function(){this.bar.style.width=100*this.position/this.total+"%";var e=Math.floor(100*this.position/this.total);this.percentText.innerHTML=e+" %"},destroy:function(){lc.UIComponent.prototype.destroy.call(this),this.textContainer=null,this.barContainer=null,this.bar=null,this.subTextContainer=null,this.percentTextContainer=null,this.percentText=null}}),lc.ui.Component.Registry.register(lc.ui.ProgressBar),lc.core.extendClass("lc.ui.ProgressBar.Extension",lc.ui.Component.Extension,function(){},{})}),lc.core.createClass("lc.ui.Choice.Item",function(e,t){Object.defineProperty(this,"parent",{writable:!1,value:e}),this.element=t;var n=this.getChoice();if(!n)throw new Error("lc.ui.Choice.Item must be created in the scope of a lc.ui.Choice (its parent or ancestor must be a Choice)");e.$childCreated(this),n.$itemCreated(this)},{parent:null,element:null,getChoice:function(){for(var e=this.parent;null!=e&&lc.core.instanceOf(e,lc.ui.Choice.ItemContainer);){if(lc.core.instanceOf(e,lc.ui.Choice))return e;e=e.parent}return null},destroy:function(){this.parent&&this.parent.removeItem(this),this.parent=null,this.element&&lc.html.remove(this.element),this.element=null}}),lc.core.extendClass("lc.ui.Choice.Item.Selectable",[lc.ui.Choice.Item,lc.events.Producer],function(e,t){lc.events.Producer.call(this),Object.defineProperty(this,"selected",{get:function(){return this.getChoice().isSelected(this)},set:function(e){e?this.getChoice().selectItem(this):this.getChoice().unselectItem(this)}});var n=!1;Object.defineProperty(this,"disabled",{get:function(){return n},set:function(e){e?(n=!0,this.getChoice().unselectItem(this),lc.css.addClass(this.element,"disabled")):(n=!1,lc.css.removeClass(this.element,"disabled")),this.trigger("disabledChanged",this)}}),this.registerEvents(["selectedChanged","disabledChanged"]),lc.ui.Choice.Item.call(this,e,t),lc.css.addClass(this.element,"selectable"),lc.events.listen(this.element,"click",new lc.async.Callback(this,function(){if(!this.disabled){var e=this.getChoice();e&&e.toggleSelection(this)}})),this.createListenersFromElement(t)},{selected:!1,disabled:!1,destroy:function(){lc.events.Producer.prototype.destroy.call(this),lc.ui.Choice.Item.prototype.destroy.call(this)}}),lc.core.extendClass("lc.ui.Choice.ItemContainer",[lc.events.Producer],function(){lc.events.Producer.call(this),this._items=[],this.registerEvents(["itemAdded","itemRemoved"])},{_items:null,addItem:function(e,t){"number"!=typeof t||t>=this._items.length?this._items.push(e):this._items.splice(t,0,e),this.trigger("itemAdded",[this,e])},getItems:function(){return this._items.slice()},indexOf:function(e){return this._items.indexOf(e)},getItemAt:function(e){return e<0||e>=this._items.length?null:this._items[e]},removeItem:function(e){var t=this._items.indexOf(e);return!(t<0)&&(this._items.splice(t,1),this.trigger("itemRemoved",[this,e]),e.parent=null,e.destroy(),!0)},getLeaves:function(e){for(var t=0;t<this._items.length;++t)lc.core.instanceOf(this._items[t],lc.ui.Choice.ItemContainer)?this._items[t].getLeaves(e):e.push(this._items[t])},$childCreated:function(e){},buildFromContent:function(e){for(var t=[];0<e.childNodes.length;)t.push(e.removeChild(e.childNodes[0]));for(var n=0;n<t.length;++n)this.buildItem(t[n])},buildItem:function(e){var t=new lc.ui.Choice.Item(this,e);this.addItem(t)},destroy:function(){if(null!==this._items){lc.events.Producer.prototype.destroy.call(this);for(var e=0;e<this._items.length;++e)this._items[e].destroy();this._items=null}}}),lc.core.extendClass("lc.ui.Choice",[lc.ui.Choice.ItemContainer,lc.events.Producer],function(e){lc.ui.Choice.ItemContainer.call(this),lc.events.Producer.call(this),this._singleSelection=e,this.registerEvents(["selectionChanged"]),this._selection=[],Object.defineProperty(this,"singleSelection",{get:function(){return this._singleSelection},set:function(e){if(this._singleSelection!=e&&(this._singleSelection=e))for(;1<this._selection.length;)this.unselect(this._selection[1])}})},{_selection:null,_singleSelection:!1,_selectItem:function(e){if(!e)return!1;if(!lc.core.instanceOf(e,lc.ui.Choice.Item.Selectable))return!1;if(e.selected)return!1;if(e.disabled)return!1;if(this._singleSelection)for(;0<this._selection.length;)this._unselectItem(this._selection[0]);return this._selection.push(e),lc.css.addClass(e.element,"selected"),e.trigger("selectedChanged",[this,e]),!0},_unselectItem:function(e){if(!e)return!1;var t=this._selection.indexOf(e);return!(t<0)&&(this._selection.splice(t,1),lc.css.removeClass(e.element,"selected"),e.trigger("selectedChanged",[this,e]),!0)},selectItem:function(e){var t;return(t=this._selectItem(e))&&this.trigger("selectionChanged",this),t},selectItems:function(e){for(var t=!1,n=0;n<e.length;++n)t|=this._selectItem(e[n]);return t&&this.trigger("selectionChanged",this),t},selectAll:function(){if(this._singleSelection)throw new Error("Cannot call selectAll on single selection choice");return this.selectItems(this.getItems())},unselectItem:function(e){var t;return(t=this._unselectItem(e))&&this.trigger("selectionChanged",this),t},unselectItems:function(e){for(var t=!1,n=0;n<e.length;++n)t|=this._unselectItem(e[n]);return t&&this.trigger("selectionChanged",this),t},unselectAll:function(){return this.unselectItems(this.getItems())},toggleSelection:function(e){this.isSelected(e)?this.unselectItem(e):this.selectItem(e)},isSelected:function(e){return 0<=this._selection.indexOf(e)},getSelection:function(){return this._selection.slice()},$itemCreated:function(e){},destroy:function(){lc.ui.Choice.ItemContainer.prototype.destroy.call(this),lc.events.Producer.prototype.destroy.call(this),this._selection=null}}),lc.app.onDefined(["lc.Extendable","lc.events.Producer","lc.Context"],function(){lc.core.extendClass("lc.ui.Component",[lc.Extendable,lc.events.Producer],function(e,t,n){if(!this.componentName)throw"lc.ui.Component must declare its componentName";if("string"==typeof e){if(this.container=document.getElementById(e),!this.container)throw"Cannot find lc.ui.Component container id '"+e+"' for component type "+this.componentName}else this.container=e||document.createElement("DIV");lc.Context.get(this.container).addProperty("lc.ui.Component",this),lc.events.listen(this.container,"destroy",new lc.async.Callback(this,this.destroy)),lc.css.addClass(this.container,this.componentName),lc.Extendable.call(this),lc.events.Producer.call(this),this.registerEvents(["configured","built"]),t||(this.performConfiguration(),n||this.performBuild())},{componentName:null,styles:null,_configured:!1,configure:function(){},isConfigured:function(){return this._configured},_built:!1,build:function(){},isBuilt:function(){return this._built},performConfiguration:function(){this.callExtensions("preConfigure",this),this.createListenersFromElement(this.container),this.configure(),this._configured=!0,this.callExtensions("postConfigure",this),this.trigger("configured",this)},performBuild:function(){this.callExtensions("preBuild",this),this.build(),this._built=!0,this.callExtensions("postBuild",this),this.trigger("built",this)},applyStyle:function(e){for(var t=lc.css.getClasses(this.container),n=0;n<t.length;++n)t[n].startsWith(this.componentName+"-style-")&&lc.css.removeClass(this.container,t[n]);e&&lc.css.addClass(this.container,this.componentName+"-style-"+e)},destroy:function(){if(!this._destroyed){this._destroyed=!0,this.callExtensions("destroyed",this),lc.Extendable.prototype.destroy.call(this);var e=lc.Context.get(this.container,!0);for(e&&e.removeProperty("lc.ui.Component");0<this.container.childNodes.length;){var t=this.container.removeChild(this.container.childNodes[0]);1==t.nodeType&&lc.events.destroyed(t)}this.container=null,lc.events.Producer.prototype.destroy.call(this)}}}),lc.core.namespace("lc.ui.Component.Registry",{components:[],_listeners:[],register:function(e){if(!e.prototype.componentName)throw"Missing componentName";lc.ui.Component.Registry.components.push(e),lc.async.Callback.callListeners(lc.ui.Component.Registry._listeners,e)},onComponentRegistered:function(e){for(var t=0;t<lc.ui.Component.Registry.components.length;++t)lc.async.Callback.callListeners(e,lc.ui.Component.Registry.components[t]);lc.ui.Component.Registry._listeners.push(e)}}),lc.core.extendClass("lc.ui.Component.Extension",lc.Extension,function(){},{extensionName:null,detect:function(e){return lc.css.hasClass(e.container,e.componentName+"-"+this.extensionName)||e.container.hasAttribute(e.componentName+"-"+this.extensionName)},init:function(e){lc.css.addClass(e.container,e.componentName+"-"+this.extensionName),e.isConfigured()&&this.postConfigure(e),e.isBuilt()&&this.postBuild(e)},preConfigure:function(e){},postConfigure:function(e){},preBuild:function(e){},postBuild:function(e){},destroyed:function(e){lc.css.removeClass(e.container,e.componentName+"-"+this.extensionName)}}),lc.ui.Component.preProcessComponent=function(e,t,n){if(1==e.nodeType){var i=lc.Context.get(e,!0);if(!i||!i.hasProperty("lc.ui.Component")){for(var s=null,o=0;o<lc.ui.Component.Registry.components.length;++o){if(e.nodeName.toLowerCase()==lc.ui.Component.Registry.components[o].prototype.componentName.toLowerCase()){lc.log.trace("lc.ui.Component","pre-processing component from element "+e.nodeName),s=new lc.ui.Component.Registry.components[o](e,!0,!0).container;break}if(lc.css.hasClass(e,lc.ui.Component.Registry.components[o].prototype.componentName.toLowerCase())){lc.log.trace("lc.ui.Component","pre-processing component from element having CSS class "+lc.ui.Component.Registry.components[o].prototype.componentName.toLowerCase()),s=new lc.ui.Component.Registry.components[o](e,!0,!0).container;break}}if(s&&(lc.Context.get(e)["lc.ui.Component"].performConfiguration(),s!=e))for(o=0;o<s.childNodes.length;++o)1==s.childNodes[o].nodeType&&lc.html.processor.process(s.childNodes[o])}}},lc.ui.Component.postProcessComponent=function(e,t,n){lc.Context.get(e,!0);var i=lc.Context.getValue(e,"lc.ui.Component");i&&i.performBuild()},lc.html.processor.addPreProcessor(lc.ui.Component.preProcessComponent,1e3),lc.html.processor.addPostProcessor(lc.ui.Component.postProcessComponent,1e3),lc.ui.Component.getInstances=function(e,t){var n=[];return t||(t=document.body),lc.ui.Component.getInstancesRecursive(e,t,n),n},lc.ui.Component.getInstancesRecursive=function(e,t,n){var i=lc.Context.getValue(t,"lc.ui.Component");!i||e&&!lc.core.instanceOf(i,e)||n.push(i);for(var s=0;s<t.childNodes.length;++s)lc.ui.Component.getInstancesRecursive(e,t.childNodes[s],n)}});
//# sourceMappingURL=lc-ui.min.js.map