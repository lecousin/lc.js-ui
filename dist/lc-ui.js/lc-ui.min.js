lc.app.onDefined(["lc.ui.Component","lc.ui.Choice"],function(){lc.core.extendClass("lc.ui.Menu",[lc.ui.Component,lc.ui.Choice],function(e,t,n){lc.ui.Component.call(this,e,t,n),lc.ui.Choice.call(this,this.container,!0)},{componentName:"lc-menu",configure:function(){this.on("elementAdded",new lc.async.Callback(this,this._createElement))},build:function(){this.buildGroupContent(this.container,this)},buildElement:function(e,t){return 1!=e.nodeType||e.hasAttribute("not-item")?e:e.hasAttribute("item-group")?this.buildGroup(e,t):this.buildItem(e,t)},buildGroup:function(e,t){var n=new lc.ui.Choice.Group(document.createElement("DIV"),t);return this.buildGroupContent(e,n),n},buildGroupContent:function(e,t){for(var n=[];0<e.childNodes.length;)n.push(e.removeChild(e.childNodes[0]));for(var i=0;i<n.length;++i)if(1==n[i].nodeType&&"TITLE"==n[i].nodeName){for(var s=document.createElement("DIV");0<n[i].childNodes.length;)s.appendChild(n[i].childNodes[0]);t.title=s}else t.addElement(this.buildElement(n[i],t))},buildItem:function(e,t){var n=e.getAttribute("value");return new lc.ui.Choice.Item(t,n,e)},_createElement:function(e,t){var n=this.createHTMLFromElement(e,t),i=t.indexOfElement(e);i>=t.element.childNodes.length?t.element.appendChild(n):t.element.insertBefore(n,t.element.childNodes[i])},createHTMLFromElement:function(e,t){return lc.core.instanceOf(e,lc.ui.Choice.Group)?this.createHTMLFromGroup(e,t):lc.core.instanceOf(e,lc.ui.Choice.Item)?this.createHTMLFromItem(e,t):this.createHTMLFromHTML(e,t)},createHTMLFromGroup:function(e,t){var n=document.createElement("DIV");return n.className="lc-menu-group",e.title&&(lc.css.addClass(e.title,"lc-menu-group-title"),n.appendChild(e.title)),lc.css.addClass(e.element,"lc-menu-group-content"),n.appendChild(e.element),n},createHTMLFromItem:function(e,t){return lc.css.addClass(e.element,"lc-menu-item"),e.element},createHTMLFromHTML:function(e,t){return 1==e.nodeType&&lc.css.addClass(e,"lc-menu-not-item"),e},destroy:function(){lc.ui.Component.prototype.destroy.call(this),lc.ui.Choice.prototype.destroy.call(this)}}),lc.ui.Component.Registry.register(lc.ui.Menu),lc.core.extendClass("lc.ui.Menu.Extension",lc.ui.Component.Extension,function(){},{})}),lc.app.onDefined("lc.ui.Panel",function(){lc.core.extendClass("lc.ui.Panel.Closeable",lc.ui.Panel.Extension,function(){},{priority:-1e4,extensionName:"closeable",postConfigure:function(e){e.closeDiv=document.createElement("DIV"),e.closeDiv.className="lc-panel-close"},postBuild:function(e){lc.events.listen(e.closeDiv,"click",function(){lc.html.remove(e.container)}),e.rightDiv.appendChild(e.closeDiv)},destroy:function(e){e.closeDiv&&(lc.html.remove(e.closeDiv),e.closeDiv=null,lc.ui.Component.Extension.call(this,e))}}),lc.Extension.Registry.register(lc.ui.Panel,lc.ui.Panel.Closeable)}),lc.app.onDefined("lc.ui.Panel",function(){lc.core.extendClass("lc.ui.Panel.Collapsible",lc.ui.Panel.Extension,function(){},{priority:-1e3,extensionName:"collapsible",postConfigure:function(e){e.collapseDiv=document.createElement("DIV"),e.collapseDiv.className="lc-panel-collapse lc-panel-expanded",e.collapse=function(){lc.animation.collapseHeight(this.content,500).ondone(new lc.async.Callback(this,function(){this.content.style.height="0px",this.content.style.paddingTop="0px",this.content.style.paddingBottom="0px",this.content.style.overflow="hidden"})),lc.css.removeClass(this.collapseDiv,"lc-panel-expanded"),lc.css.addClass(this.collapseDiv,"lc-panel-collapsed")},e.expand=function(){this.content.style.height="",this.content.style.paddingTop="",this.content.style.paddingBottom="",this.content.style.overflow="",lc.animation.expandHeight(this.content,500),lc.css.addClass(this.collapseDiv,"lc-panel-expanded"),lc.css.removeClass(this.collapseDiv,"lc-panel-collapsed")},e.toggleCollapsed=function(){this.isExpanded()?this.collapse():this.expand()},e.isCollapsed=function(){return lc.css.hasClass(this.collapseDiv,"lc-panel-collapsed")},e.isExpanded=function(){return!this.isCollapsed()}},postBuild:function(e){lc.events.listen(e.collapseDiv,"click",new lc.async.Callback(e,e.toggleCollapsed)),e.rightDiv.appendChild(e.collapseDiv)},destroy:function(e){e.collapseDiv&&(lc.html.remove(e.collapseDiv),e.collapseDiv=null,lc.ui.Component.Extension.call(this,e))}}),lc.Extension.Registry.register(lc.ui.Panel,lc.ui.Panel.Collapsible)}),lc.app.onDefined("lc.ui.Component",function(){lc.core.extendClass("lc.ui.Panel",lc.ui.Component,function(e,t,n){lc.ui.Component.call(this,e,t,n)},{componentName:"lc-panel",configure:function(){this.header=document.createElement("DIV"),this.header.className="lc-panel-header",this.content=document.createElement("DIV"),this.content.className="lc-panel-content",this.titleDiv=document.createElement("DIV"),this.titleDiv.className="lc-panel-title",this.header.appendChild(this.titleDiv),this.leftDiv=document.createElement("DIV"),this.leftDiv.className="lc-panel-header-left",this.header.appendChild(this.leftDiv),this.rightDiv=document.createElement("DIV"),this.rightDiv.className="lc-panel-header-right",this.header.appendChild(this.rightDiv)},build:function(){for(;0<this.container.childNodes.length;){var e=this.container.removeChild(this.container.childNodes[0]);if(1==e.nodeType)if("TITLE"==e.nodeName)for(;0<e.childNodes.length;)this.titleDiv.appendChild(e.removeChild(e.childNodes[0]));else if("CONTENT"==e.nodeName)for(;0<e.childNodes.length;)this.content.appendChild(e.removeChild(e.childNodes[0]))}this.container.appendChild(this.header),this.container.appendChild(this.content)},destroy:function(){lc.events.destroyed(this.header),this.header=null,this.titleDiv=null,this.leftDiv=null,this.rightDiv=null,lc.events.destroyed(this.content),this.content=null,lc.ui.Component.prototype.destroy.call(this)}}),lc.ui.Component.Registry.register(lc.ui.Panel),lc.core.extendClass("lc.ui.Panel.Extension",lc.ui.Component.Extension,function(){},{})}),lc.app.onDefined("lc.ui.Component",function(){lc.core.extendClass("lc.ui.ProgressBar",[lc.ui.Component,lc.Configurable],function(e,t,n){var i={total:{types:["integer"],value:1,set:function(e,t){e||(e=1),"string"==typeof e&&(e=parseInt(e)),e<=0&&(e=1),t.total.value=e,this.updateBar()}},position:{types:["integer"],value:0,set:function(e,t){e||(e=0),"string"==typeof e&&(e=parseInt(e)),t.position.value=e,this.updateBar()}},percentTextVisible:{types:["boolean"],value:!1,set:function(e,t){t.percentTextVisible.value=!!e,this.percentTextContainer.style.display=e?"":"none"}},text:{types:["string","Node"],value:"",set:function(e,t){e||(e=""),"string"==typeof(t.text.value=e)&&(e=document.createTextNode(e)),lc.html.empty(this.textContainer),this.textContainer.appendChild(e)}},subText:{types:["string","Node"],value:"",set:function(e,t){e||(e=""),"string"==typeof(t.subText.value=e)&&(e=document.createTextNode(e)),lc.html.empty(this.subTextContainer),this.subTextContainer.appendChild(e)}}};lc.Configurable.call(this,i),lc.ui.Component.call(this,e,t,n)},{componentName:"lc-progress-bar",configure:function(){this.textContainer=document.createElement("DIV"),this.textContainer.className="progressText",this.barContainer=document.createElement("DIV"),this.barContainer.className="progressBarContainer",this.bar=document.createElement("DIV"),this.bar.className="progressBar",this.barContainer.appendChild(this.bar),this.subTextContainer=document.createElement("DIV"),this.subTextContainer.className="progressSubText",this.percentTextContainer=document.createElement("DIV"),this.percentTextContainer.className="progressPercentTextContainer",this.barContainer.appendChild(this.percentTextContainer),this.percentText=document.createElement("DIV"),this.percentText.className="progressPercentText",this.percentTextContainer.appendChild(this.percentText),this.container.hasAttribute("percent-text")&&(this.percentTextVisible="true"==this.container.getAttribute("percent-text")),this.percentTextContainer.style.display=this.percentTextVisible?"":"none"},build:function(){var e;(e=this.container.getAttribute("text"))&&(this.text=e),(e=this.container.getAttribute("subText"))&&(this.subText=e),(e=this.container.getAttribute("total"))&&(this.total=e),(e=this.container.getAttribute("position"))&&(this.position=e),this.container.appendChild(this.textContainer),this.container.appendChild(this.barContainer),this.container.appendChild(this.subTextContainer),this.updateBar()},updateBar:function(){this.bar.style.width=this.position*(this.barContainer.clientWidth-2*this.bar.clientLeft)/this.total+"px";var e=Math.floor(100*this.position/this.total);this.percentText.innerHTML=e+" %"},destroy:function(){lc.UIComponent.prototype.destroy.call(this),this.textContainer=null,this.barContainer=null,this.bar=null,this.subTextContainer=null,this.percentTextContainer=null,this.percentText=null}}),lc.ui.Component.Registry.register(lc.ui.ProgressBar),lc.core.extendClass("lc.ui.ProgressBar.Extension",lc.ui.Component.Extension,function(){},{})}),lc.core.createClass("lc.ui.Choice.Group",function(e,t){this.element=e,Object.defineProperty(this,"parent",{value:t,writable:!1}),this._elements=[]},{element:null,parent:null,title:null,_elements:null,getItem:function(e){for(var t=0;t<this._elements.length;++t)if(lc.core.instanceOf(this._elements[t],lc.ui.Choice.Item)){if(this._elements[t].value==e)return this._elements[t]}else if(lc.core.instanceOf(this._elements[t],lc.ui.Choice.Group)){var n=this._elements[t].getItem(e);if(n)return n}},getElements:function(){return this._element.slice()},indexOfElement:function(e){return this._elements.indexOf(e)},getItems:function(){var e=[];return this._getItems(e),e},_getItems:function(e){for(var t=0;t<this._elements.length;++t)lc.core.instanceOf(this._elements[t],lc.ui.Choice.Item)?e.push(this._elements[t]):lc.core.instanceOf(this._elements[t],lc.ui.Choice.Group)&&this._elements[t]._getItems(e)},addElement:function(e,t){"number"!=typeof t||t>=this._elements.length?this._elements.push(e):this._elements.splice(t,0,e);var n=this;do{if(lc.core.instanceOf(n,lc.ui.Choice)){n._elementAdded(e,this);break}n=n.parent}while(n)},removeElement:function(e){if(0<=(t=this._elements.indexOf(e)))return this._elements.splice(t,1),!0;for(var t=0;t<this._elements.length;++t)if(lc.core.instanceOf(this._elements[t],lc.ui.Choice.Group)&&this._elements[t].removeElement(e))return!0;return!1},destroy:function(){if(null!==this._elements){for(var e=0;e<this._elements.length;++e)"function"==typeof this._elements[e].destroy&&this._elements[e].destroy();this._elements=null,this.parent=null}}}),lc.core.extendClass("lc.ui.Choice",[lc.ui.Choice.Group,lc.events.Producer],function(e,t){lc.ui.Choice.Group.call(this,e,null),lc.events.Producer.call(this),this._singleSelection=t,this.registerEvents(["selectionChanged","elementAdded","elementRemoved","itemAdded","itemRemoved"]),this._selection=[]},{_selection:null,_singleSelection:!1,_select:function(e){if(!e)return!1;if(e.selected)return!1;if(this._singleSelection)for(;0<this._selection.length;)this.unselectItem(this._selection[0]);return this._selection.push(e),lc.css.addClass(e.element,"selected"),e.trigger("selectionChanged",e),!0},selectItem:function(e){var t;return(t=this._selectItem(e))&&this.trigger("selectionChanged",this),t},selectValue:function(e){return this.selectItem(this.getItem(e))},_selectValue:function(e){return this._selectItem(this.getItem(e))},selectItems:function(e){for(var t=!1,n=0;n<e.length;++n)t|=this._selectItem(e[n]);return t&&this.trigger("selectionChanged",this),t},selectValues:function(e){for(var t=!1,n=0;n<e.length;++n)t|=this._selectValue(e[n]);return t&&this.trigger("selectionChanged",this),t},selectAll:function(){if(this._singleSelection)throw new Error("Cannot call selectAll on single selection choice");return this.selectItems(this.getItems())},_unselectItem:function(e){if(!e)return!1;if(!e.selected)return!1;var t=this._selection.indexOf(e);return!(t<0)&&(this._selection.splice(t,1),lc.css.removeClass(e.element,"selected"),e.trigger("selectionChanged",e),!0)},unselectItem:function(e){var t;return(t=this._unselectItem(e))&&this.trigger("selectionChanged",this),t},_unselectValue:function(e){return this._unselectItem(this.getItem(e))},unselectValue:function(e){return this.unselectItem(this.getItem(e))},unselectItems:function(e){for(var t=!1,n=0;n<e.length;++n)t|=this._unselectItem(e[n]);return t&&this.trigger("selectionChanged",this),t},unselectValues:function(e){for(var t=!1,n=0;n<e.length;++n)t|=this._unselectValue(e[n]);return t&&this.trigger("selectionChanged",this),t},unselectAll:function(){return this.unselectItems(this.getItems())},isSelected:function(e){return 0<=this._selection.indexOf(e)},getSelection:function(){return this._selection.slice()},_elementAdded:function(e,t){var n=[];lc.core.instanceOf(e,lc.ui.Choice.Group)?e._getItems(n):lc.core.instanceOf(e,lc.ui.Choice.Item)&&n.push(e);for(var i=0;i<n.length;++i)n[i]._choice=this;this.trigger("elementAdded",[e,t]);for(i=0;i<n.length;++i)this.trigger("itemAdded",[n[i],t])},_elementRemoved:function(e,t){var n=[];lc.core.instanceOf(e,lc.ui.Choice.Group)?e._getItems(n):lc.core.instanceOf(e,lc.ui.Choice.Item)&&n.push(e),this.unselectItems(n),this.trigger("elementRemoved",[e,t]);for(var i=0;i<n.length;++i)this.trigger("itemRemoved",[n[i],t])},destroy:function(){lc.ui.Choice.Group.prototype.destroy.call(this),lc.events.Producer.prototype.destroy.call(this),this._selection=null}}),lc.core.extendClass("lc.ui.Choice.Item",[lc.events.Producer],function(e,t,n){lc.events.Producer.call(this),this.group=e,"string"==typeof n&&(n=document.createTextNode(n)),this.element=n,this._choice=null,Object.defineProperty(this,"value",{value:t,writable:!1}),Object.defineProperty(this,"selected",{get:function(){return!!this._choice&&this._choice.isSelected(this)},set:function(e){if(!this._choice)throw new Error("An item must be attached to a choice to be selected");e?this._choice.selectItem(this):this._choice.unselectItem(this)}}),this.registerEvents(["selectionChanged"])},{group:null,value:null,element:null,selected:!1,destroy:function(){lc.events.Producer.prototype.destroy.call(this),this._choice&&this._choice.removeElement(this),this._choice=null,this.element&&lc.html.remove(this.element),this.element=null,delete this.value}}),lc.app.onDefined(["lc.Extendable","lc.events.Producer","lc.Context"],function(){lc.core.extendClass("lc.ui.Component",[lc.Extendable,lc.events.Producer],function(e,t,n){if(!this.componentName)throw"lc.ui.Component must declare its componentName";if("string"==typeof e){if(this.container=document.getElementById(e),!this.container)throw"Cannot find lc.ui.Component container id '"+e+"' for component type "+this.componentName}else this.container=e||document.createElement("DIV");lc.Context.get(this.container).addProperty("lc.ui.Component",this),lc.events.listen(this.container,"destroy",new lc.async.Callback(this,this.destroy)),lc.css.addClass(this.container,this.componentName),lc.Extendable.call(this),lc.events.Producer.call(this),this.registerEvents(["configured","built"]),t||(this.performConfiguration(),n||this.performBuild())},{componentName:null,_configured:!1,configure:function(){},isConfigured:function(){return this._configured},_built:!1,build:function(){},isBuilt:function(){return this._built},performConfiguration:function(){this.callExtensions("preConfigure",this),this.configure(),this._configured=!0,this.callExtensions("postConfigure",this),this.trigger("configured",this)},performBuild:function(){this.callExtensions("preBuild",this),this.build(),this._built=!0,this.callExtensions("postBuild",this),this.trigger("built",this)},destroy:function(){if(!this._destroyed){this._destroyed=!0,this.callExtensions("destroyed",this),lc.Extendable.prototype.destroy.call(this);var e=lc.Context.get(this.container,!0);for(e&&e.removeProperty("lc.ui.Component");0<this.container.childNodes.length;){var t=this.container.removeChild(this.container.childNodes[0]);1==t.nodeType&&lc.events.destroyed(t)}this.container=null,lc.events.Producer.prototype.destroy.call(this)}}}),lc.core.namespace("lc.ui.Component.Registry",{components:[],_listeners:[],register:function(e){if(!e.prototype.componentName)throw"Missing componentName";lc.ui.Component.Registry.components.push(e),lc.async.Callback.callListeners(lc.ui.Component.Registry._listeners,e)},onComponentRegistered:function(e){for(var t=0;t<lc.ui.Component.Registry.components.length;++t)lc.async.Callback.callListeners(e,lc.ui.Component.Registry.components[t]);lc.ui.Component.Registry._listeners.push(e)}}),lc.core.extendClass("lc.ui.Component.Extension",lc.Extension,function(){},{extensionName:null,detect:function(e){return lc.css.hasClass(e.container,e.componentName+"-"+this.extensionName)||e.container.hasAttribute(e.componentName+"-"+this.extensionName)},init:function(e){lc.css.addClass(e.container,e.componentName+"-"+this.extensionName),e.isConfigured()&&this.postConfigure(e),e.isBuilt()&&this.postBuild(e)},preConfigure:function(e){},postConfigure:function(e){},preBuild:function(e){},postBuild:function(e){},destroyed:function(e){lc.css.removeClass(e.container,e.componentName+"-"+this.extensionName)}}),lc.ui.Component.preProcessComponent=function(e,t,n){if(1==e.nodeType){var i=lc.Context.get(e,!0);if(!i||!i.hasProperty("lc.ui.Component")){for(var s=null,o=0;o<lc.ui.Component.Registry.components.length;++o){if(e.nodeName.toLowerCase()==lc.ui.Component.Registry.components[o].prototype.componentName.toLowerCase()){lc.log.trace("lc.ui.Component","pre-processing component from element "+e.nodeName),s=new lc.ui.Component.Registry.components[o](e,!0,!0).container;break}if(lc.css.hasClass(e,lc.ui.Component.Registry.components[o].prototype.componentName.toLowerCase())){lc.log.trace("lc.ui.Component","pre-processing component from element having CSS class "+lc.ui.Component.Registry.components[o].prototype.componentName.toLowerCase()),s=new lc.ui.Component.Registry.components[o](e,!0,!0).container;break}}if(s&&(lc.Context.get(e)["lc.ui.Component"].performConfiguration(),s!=e))for(o=0;o<s.childNodes.length;++o)1==s.childNodes[o].nodeType&&lc.html.processor.process(s.childNodes[o])}}},lc.ui.Component.postProcessComponent=function(e,t,n){lc.Context.get(e,!0);var i=lc.Context.getValue(e,"lc.ui.Component");i&&i.performBuild()},lc.html.processor.addPreProcessor(lc.ui.Component.preProcessComponent,1e3),lc.html.processor.addPostProcessor(lc.ui.Component.postProcessComponent,1e3),lc.ui.Component.getInstances=function(e,t){var n=[];return t||(t=document.body),lc.ui.Component.getInstancesRecursive(e,t,n),n},lc.ui.Component.getInstancesRecursive=function(e,t,n){var i=lc.Context.getValue(t,"lc.ui.Component");!i||e&&!lc.core.instanceOf(i,e)||n.push(i);for(var s=0;s<t.childNodes.length;++s)lc.ui.Component.getInstancesRecursive(e,t.childNodes[s],n)}});
//# sourceMappingURL=lc-ui.min.js.map